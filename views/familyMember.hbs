
<section class="content-header" id="familyMember-delegate">
  <button class="btn btn-primary modify-familyMember" data-toggle="modal" data-target="#familyModal">添加家庭成员</button>
  <div class="box">
    <div class="box-header">
      <h3 class="box-title">家庭成员信息</h3>
    </div>
    <!-- /.box-header -->
    <div class="box-body no-padding">
      <table class="table table-condensed">
        <tbody>
          <tr>
            <th>姓名</th>
            <th>关系</th>
            <th>年龄</th>
            <th>性别</th>
            <th>联系方式</th>
            <th>职位</th>
            <th>身份证号码</th>
            <th>出生日期</th>
            <th>描述</th>
            <th>操作</th>
        </tr>
        {{#each familyMember}}
          <tr>
            <td>{{name}}</td>
            <td>{{relation}}</td>
            <td>{{age}}</td>
            <td>{{gender}}</td>
            <td>{{number}}</td>
            <td>{{job}}</td>
            <td>{{certificationID}}</td>
            <td>{{birthday}}</td>
            <td>{{description}}</td>
            <td><button data-toggle="modal" data-target="#familyModal" class="btn btn-primary modify-familyMember" data-id={{id}} data-name="{{name}}" data-relation="{{relation}}" data-age="{{age}}"
            data-gender="{{gender}}" data-number="{{number}}" data-job="{{job}}"
            data-certificationID="{{certificationID}}" data-birthday="{{birthday}}" data-description="{{description}}"
            >修改</button>
            <button class="btn btn-primary deleteFamilyMember" data-id="{{id}}">删除</button>
            </td>
          </tr>
        {{/each}}
      </tbody>
      </table>
    </div>
    <!-- /.box-body -->
  </div>
</section>

<!-- 模态框（Modal） -->
<div class="modal fade" id="familyModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">编辑证件信息</h4>
            </div>
            <div class="modal-body">
            <!-- /.box-header -->
            <!-- form start -->
            <form role="form" action="/familyCenter/familyMemberInfo" method="post">
              <div class="box-body">
                <div class="form-group">
                  <label for="name">姓名</label>
                  <input type="text" class="form-control" id="name" name="name">
                </div>
                <div class="form-group">
                  <label for="relation">关系</label>
                  <input type="text" class="form-control" id="relation" name="relation">
                </div>
                <div class="form-group">
                  <label for="age">年龄</label>
                  <input type="text" class="form-control" id="age" name="age">
                </div> 
                <div class="form-group">
                  <label for="gender">性别</label>
                  <input type="text" class="form-control" id="gender" name="gender">
                </div> 
                 <div class="form-group">
                  <label for="number">联系方式</label>
                  <input type="text" class="form-control" id="number" name="number">
                </div>
                 <div class="form-group">
                  <label for="job">职位</label>
                  <input type="text" class="form-control" id="job" name="job">
                </div> 
                 <div class="form-group">
                  <label for="certificationID">身份证号码</label>
                  <input type="text" class="form-control" id="certificationID" name="certificationID">
                </div> 
                 <div class="form-group">
                  <label for="birthday">出生日期</label>
                  <input type="date" class="form-control" id="birthday" name="birthday">
                </div> 
                 <div class="form-group">
                  <label for="description">描述</label>
                  <input type="text" class="form-control" id="description" name="description">
                </div>  
                <div class="form-group" style="display: none">
                  <label for="id">id</label>
                  <input type="text" class="form-control" id="id" name="id">
                </div>  
               
              </div>
              <!-- /.box-body -->
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="submit" class="btn btn-default" >确定</button>

            </form>
          </div>
      </div>
           
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>
<script src="/plugins/jQuery/jquery-2.2.3.min.js"></script>
<script>
  $('#familyMember-delegate').delegate('.modify-familyMember', 'click', function(e) {
      var target = $(e.target);
      $('#name').val(target.data("name"));
      $('#relation').val(target.data("relation"));
      $('#age').val(target.data("age"));
      $('#gender').val(target.data("gender"));
      $('#number').val(target.data("number"));
      $('#job').val(target.data("job"));
      $('#certificationID').val(target.data("certificationid"));
      $('#birthday').val(target.data("birthday"));
      $('#description').val(target.data("description"));
      $('#id').val(target.data("id"));
  });
  $('#familyMember-delegate').delegate('.deleteFamilyMember', 'click', function(e) {
    var target = $(e.target);
    $.ajax({
      url: 'http://127.0.0.1:3000/familyCenter/familyMemberInfo/del',
      method: 'post',
      data: {id: target.data('id')},
      success: function(data){
        if(data == 'ok'){
          var tr = target.parents('tr');
          tr.remove();
        }
      }
    });
  })
</script>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
          